<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Login</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/login.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
    
<div class="sidenav">
         <div class="login-main-text">
            <h2>Mint<br> Login Page</h2>
            <p>Login or register from here to access.</p>
         </div>
      </div>
      <div class="main">
         <div class="col-md-6 col-sm-12">
            <div class="login-form">
                  <div class="form-group">
                     <label>User Name</label>
                     <input type="text" class="form-control" name="username"  id="username" placeholder="User Name">
                  </div>
                  <div class="form-group">
                     <label>Password</label>
                     <input type="password" class="form-control" name="password" id="password"  placeholder="Password">
                  </div>
                  <button  id="login" class="btn btn-black">Login</button>
                  <div style="float:right;padding-top: 9px;">No Acoout ?  <a href="http://localhost:8088/mint-auth/page/register">Register</a></div>
            </div>
         </div>
      </div>
      <script>
      	$(function(){
      		console.log("Hi mint!");
      		$("#login").click(function(){
      			var formData={
      					username:$("#username").val(),
      					password:$("#password").val()
      			}
      			$.ajax({
      	            type : "POST",
      	            url : "http://localhost:8088/mint-auth/auth/doLogin",
      	            data : JSON.stringify(formData),
    		        dataType: 'json',
	                contentType:'application/json;charset=UTF-8',
	                async: true,
      	            success : function(result) {
      	            	if(result.exception) {
      	            		alert(result.exception.msg);
      	            		return;
      	            	}
      	            	if (result.exception === null) {
      	            		if (result.data) {
      	            			window.location.href="http://localhost:8089/mint-app/app"
      	            		}
      	            	}
      	            },
      	            error : function(e){
      	                alert("登陆失败");
      	            }
      	        });
        	});
      		
      	});
      </script>
</body>
</html>